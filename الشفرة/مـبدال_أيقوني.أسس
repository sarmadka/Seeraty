صنف مـبدال_أيقوني {
    @حقنة عرف مركب: مـركب؛

    // المتغيرات
    عرف المشاهد: مـصفوفة[سـندنا[صـفحة_أيقونية]]؛
    عرف معالج_تغير_المسار: مغلفة (سند[نـافذة], سند[صـحيح]) = مغلفة (سند[نـافذة], سند[صـحيح]) {
        هذا.عند_تغير_المسار()؛
    };

    عملية هذا~هيئ() {
        عرف الكائن: سند[هذا_الصنف](هذا)؛
        نـافذة.النموذج.عند_تغير_المسار.اربط(هذا.معالج_تغير_المسار)؛
        هذا.المشهد = صـندوق({ }).{
            الطراز.{
                الموقع = مـوقع._نسبي_؛
                الإظهار = إظـهار._مرن_؛
                النسق = نـسق._عمود_؛
                ملء_السطر = مـلء_سطر._بداية_؛
                المحاذاة = مـحاذاة._وسط_؛
                العرض = مـسافة.مئوي(100)؛
                الطول = مـسافة.طن(100) - مـسافة.نقاط(10)؛
            }؛
            عند_تغير_الأبعاد.اربط(مغلفة (ودجة: سند[ودجـة]، حمولة: سند[صـحيح]) {
                عرف ع: صـحيح؛
                لكل ع = 0، ع < الكائن.المشاهد.هات_الطول()، ++ع {
                    الكائن.المشاهد(ع).قد_تغير_العرض(هذا.هات_الأبعاد().عرض)؛
                }
            })؛
            أضف_فروع({
                مـشهد_وثيقة().{
                    الطراز.{
                        الهامش = مـسافة4.نقاط(60، 0، 0، 0)؛
                        محاذاة_النص = مـحاذاة_نص._وسط_؛
                    }؛
                    حدد_ماركداون(تـرجمة.نص(
                        "برمجتُ هذا الموقع باستخدام [مـنصة_ويب](https://github.com/Alusus/WebPlatform)\\n\ج"
                        "والتي برمجتها باستخدام [لغة الأسس](https://alusus.org)\\n\ج"
                        "والتي هي الأخرى من إنتاجاتي البرمجية"
                    )، 1)؛
                }،
                ارتـباط_تشعبي().{
                    العنوان = هات_مسارا("/about")؛
                    حدد_الفرع(كـتابة().{
                        النص = تـرجمة.نص("عن الموقع")؛
                        الطراز.{
                            الهامش = مـسافة4.نقاط(20، 0، 0، 0)؛
                            لون_الخط = السمة.لون_الرابط؛
                        }؛
                    })؛
                    عند_الضغط.المبدئي_مكبوح = 1؛
                    عند_الضغط.اربط(مغلفة (ودجة: سند[ودجـة]، حمولة: سند[صـحيح]) {
                        نـافذة.النموذج.ادفع_مسارا(هات_مسارا("/about"))؛
                    })؛
                }
            })؛
        }؛
        هذا.أضف_مشهدا(صـفحة_أيقونية(
            مـسافة.نقاط(10)، هات_مسارا("/info")، نـص("/الموارد/معلومات.svg")، تـرجمة.نص("معلومات عامة")، مـشهد_المعلومات()
        ))؛
        هذا.أضف_مشهدا(صـفحة_أيقونية(
            مـسافة.نقاط(70)، هات_مسارا("/projects")، نـص("/الموارد/مشاريع.svg")، تـرجمة.نص("مشاريع")، مـشهد_المشاريع()
        ))؛
        هذا.أضف_مشهدا(صـفحة_أيقونية(
            مـسافة.نقاط(130)، هات_مسارا("/jobs")، نـص("/الموارد/وظائف.svg")، تـرجمة.نص("الخدمة المهنية")، مـشهد_الخبرة_المهنية()
        ))؛
        هذا.أضف_مشهدا(صـفحة_أيقونية(
            مـسافة.نقاط(190)، هات_مسارا("/contact")، نـص("/الموارد/اتصل.svg")، تـرجمة.نص("اتصل بي")، مـشهد_الاتصال()
        ))؛
        هذا.عند_تغير_المسار()؛
    }

    عملية هذا~أتلف() {
        نـافذة.النموذج.عند_تغير_المسار.افصل(هذا.معالج_تغير_المسار)؛
    }

    عملية هذا.أضف_مشهدا(مشهد: سـندنا[صـفحة_أيقونية]) {
        هذا.المشاهد.أضف(مشهد)؛
        هذا.المشهد.كائن~مثل[سند[صـندوق]].أضف_فروع({ مشهد })؛
        مشهد.قد_تغير_العرض(هذا.المشهد.هات_الأبعاد().عرض)؛
    }

    عملية هذا.عند_تغير_المسار() {
        عرف ع: صحيح؛
        لكل ع = 0، ع < هذا.المشاهد.هات_الطول()، ++ع {
            إذا نـص.قارن(نـافذة.النموذج.مسار_الموقع، هذا.المشاهد(ع).المسار، هذا.المشاهد(ع).المسار.هات_الطول()) == 0 {
                هذا.المشاهد(ع).افتح()؛
            } وإلا {
                هذا.المشاهد(ع).أغلق()؛
            }
        }
    }

    عملية هذا_الصنف (): سـندنا[مـبدال_أيقوني] {
        أرجع سـندنا[مـبدال_أيقوني]().{ احجز()~هيئ() }؛
    }
}

