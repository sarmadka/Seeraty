صنف مـشهد_أيقوني {
    @حقنة عرف مركب: مـركب؛
    عرف المسار: نـص؛

    عملية هذا~هيئ(س: نـص، مسار: نـص، أيقونة: نـص، مشهد: سـندنا[مـركب]) {
        عرف الكائن: سند[هذا_الصنف](هذا)؛
        هذا.المسار = مسار؛
        هذا.المشهد = صـندوق({}).{
            الطراز.{
                الموقع = "absolute"؛
                نصف_قطر_الإطار = "25pt"؛
                الفيض = "hidden"؛
                الخلفية = لـون("fff")؛
                الانتقال = "width 0.5s, height 0.5s, border-radius 0.5s, top 0.5s, right 0.5s, left 0.5s"؛
            }؛
            الطراز("مغلق").{
                فوق = "0pt"؛
                يمين = س؛
                العرض = "50pt"؛
                الطول = "50pt"؛
            }؛
            الطراز("مفتوح").{
                فوق = "55pt"؛
                يمين = "10pt"؛
                العرض = "calc(100% - 20pt)"؛
                الطول = "calc(100% - 65pt)"؛
                نصف_قطر_الإطار = ربـاعية(0، 25، 0، 0)؛
            }؛
            اسم_الفئة = نـص("مغلق")؛
            أضف_فروع({
                صـورة().{
                    الرابط = أيقونة؛
                    الطراز.{
                        العرض = "46pt"؛
                        الطول = "46pt"؛
                        الهامش = "2pt"؛
                    }؛
                    عند_الضغط.اربط(مغلفة (ودجة: سند[ودجـة], حمولة: سند[صحيح]) {
                        إذا نـافذة.النموذج.المسار == الكائن.المسار {
                            نـافذة.النموذج.ادفع_مسارا("/")؛
                        } وإلا {
                            نـافذة.النموذج.ادفع_مسارا(الكائن.المسار)؛
                        }
                    })؛
                }،
                مشهد
            })؛
        }؛
    }

    عملية هذا.افتح() {
        هذا.المشهد.اسم_الفئة = نـص("مفتوح")؛
    }
    
    عملية هذا.أغلق() {
        هذا.المشهد.اسم_الفئة = نـص("مغلق")؛
    }

    عملية هذا_الصنف(س: نـص، مسار: نـص، أيقونة: نـص، مشهد: سـندنا[مـركب]): سـندنا[مـشهد_أيقوني] {
        أرجع سـندنا[مـشهد_أيقوني]().{ احجز()~هيئ(س، مسار، أيقونة، مشهد) }؛
    }
}
