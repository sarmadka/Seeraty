صنف صـفحة_أيقونية {
    @حقنة عرف مركب: مـركب؛
    عرف المسار: نـص؛
    عرف مشهد_أيقوني: سـندنا[مـشهد_أيقوني]؛

    عملية هذا~هيئ(س: سند[مـسافة]، مسار: نـص، أيقونة: نـص، عنوان: نـص، مشهد: سـندنا[مـشهد_أيقوني]) {
        هذا.مشهد_أيقوني = مشهد؛
        عرف الكائن: سند[هذا_الصنف](هذا)؛
        هذا.المسار = مسار؛
        هذا.المشهد = صـندوق({}).{
            الطراز.{
                الموقع = مـوقع._مطلق_؛
                نصف_قطر_الإطار = مـسافة4.نقاط(25)؛
                الفيض_س = فـيض._مقطوع_؛
                الفيض_ص = فـيض._مقطوع_؛
                الخلفية = خـلفية(السمة.لون_خلفية_الصفحة)؛
                انتقال_نصف_قطر_الإطار = انـتقال(0.5)؛
                انتقال_العرض = انـتقال(0.5)؛
                انتقال_الطول = انـتقال(0.5)؛
                انتقال_فوق = انـتقال(0.5)؛
                انتقال_يسار = انـتقال(0.5)؛
                انتقال_يمين = انـتقال(0.5)؛
            }؛
            الطراز("مغلق").{
                فوق = مـسافة.نقاط(0)؛
                إذا من_اليمين يمين = س وإلا يسار = س؛
                العرض = مـسافة.نقاط(50)؛
                الطول = مـسافة.نقاط(50)؛
            }؛
            الطراز("مفتوح").{
                فوق = مـسافة.نقاط(55)؛
                إذا من_اليمين يمين = مـسافة.نقاط(10) وإلا يسار = مـسافة.نقاط(10)؛
                العرض = مـسافة.مئوي(100) - مـسافة.نقاط(20)؛
                الطول = مـسافة.مئوي(100) - مـسافة.نقاط(65)؛
                إذا من_اليمين نصف_قطر_الإطار = مـسافة4.نقاط(0، 25، 0، 0)
                وإلا نصف_قطر_الإطار = مـسافة4.نقاط(25، 0، 0، 0)؛
            }؛
            اسم_الفئة = نـص("مغلق")؛
            أضف_فروع({
                صـندوق().{
                    الطراز.{
                        الإظهار = إظـهار._مرن_؛
                        النسق = نـسق._سطر_؛
                        المحاذاة = مـحاذاة._وسط_؛
                        العرض = مـسافة.نقاط(250)؛
                    }؛
                    أضف_فروع({
                        صـورة().{
                            الرابط = أيقونة؛
                            الطراز.{
                                العرض = مـسافة.نقاط(46)؛
                                الطول = مـسافة.نقاط(46)؛
                                المؤشر = مـؤشر._سبابة_؛
                                إذا من_اليمين الهامش = مـسافة4.نقاط(2، 2، 2، 10)
                                وإلا الهامش = مـسافة4.نقاط(2، 10، 2، 2)؛
                            }؛
                            عند_الضغط.اربط(مغلفة (ودجة: سند[ودجـة], حمولة: سند[صحيح]) {
                                إذا نـص.قارن(نـافذة.النموذج.المسار، الكائن.المسار، الكائن.المسار.هات_الطول()) == 0 {
                                    نـافذة.النموذج.ادفع_مسارا("/")؛
                                } وإلا {
                                    نـافذة.النموذج.ادفع_مسارا(الكائن.المسار)؛
                                }
                            })؛
                        }،
                        كـتابة_عنوان(عنوان)
                    })؛
                }،
                مشهد
            })؛
        }؛
    }

    عملية هذا.قد_تغير_العرض(عرض: صـحيح) {
        هذا.مشهد_أيقوني.قد_تغير_العرض(عرض)؛
    }

    عملية هذا.افتح() {
        هذا.المشهد.اسم_الفئة = نـص("مفتوح")؛
    }

    عملية هذا.أغلق() {
        هذا.المشهد.اسم_الفئة = نـص("مغلق")؛
    }

    عملية هذا_الصنف(س: سند[مـسافة]، مسار: نـص، أيقونة: نـص، عنوان: نـص، مشهد: سـندنا[مـشهد_أيقوني]): سـندنا[صـفحة_أيقونية] {
        أرجع سـندنا[صـفحة_أيقونية]().{ احجز()~هيئ(س، مسار، أيقونة، عنوان، مشهد) }؛
    }
}
